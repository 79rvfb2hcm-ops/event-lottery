<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ãŠç¥­ã‚ŠæŠ½é¸ä¼š</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
  margin:0;background:#fff7e6;color:#222;
}
.wrap{max-width:520px;margin:0 auto;padding:20px}
.card{
  background:#ffffff;border-radius:18px;padding:22px;
  box-shadow:0 10px 30px rgba(0,0,0,.12);
  text-align:center;
}
h1{margin:0 0 10px;font-size:24px}
.btn{
  width:100%;padding:16px;border-radius:16px;border:none;
  font-size:20px;font-weight:800;
  background:#e53935;color:#fff;
}
.btn:disabled{opacity:.6}
.small{font-size:13px;color:#555}

/* ==== ãŠç¥­ã‚Šæ¼”å‡º ==== */
#animation{display:none;margin-top:20px}
.drum{
  width:140px;height:140px;border-radius:50%;
  background:
    radial-gradient(circle at center, #fff 0%, #fff 35%, #e53935 36%, #e53935 100%);
  margin:0 auto;
  animation:spin 0.4s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
.lantern{
  font-size:26px;margin:6px;
  animation:float 1s ease-in-out infinite alternate;
}
@keyframes float{
  from{transform:translateY(0)}
  to{transform:translateY(-6px)}
}

/* ==== çµæœ ==== */
.result{display:none;margin-top:18px;padding:18px;border-radius:16px}
.r1{background:#fff3b0}
.r2{background:#e1f5fe}
.r3{background:#eeeeee}
.rank{font-size:30px;font-weight:900;margin:10px 0}
.code{font-family:monospace;background:#f4f4f4;padding:4px 8px;border-radius:8px}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <h1>ğŸ¯ ãŠç¥­ã‚ŠæŠ½é¸ä¼š ğŸ¯</h1>
    <p>ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚¬ãƒ©ã‚¬ãƒ©æŠ½é¸ï¼</p>

    <button id="drawBtn" class="btn">æŠ½é¸ã™ã‚‹</button>

    <!-- æ¼”å‡º -->
    <div id="animation">
      <div class="lantern">ğŸ®ğŸ®ğŸ®</div>
      <div class="drum"></div>
      <p style="font-weight:700;margin-top:10px">ã‚¬ãƒ©ã‚¬ãƒ©æŠ½é¸ä¸­â€¦</p>
    </div>

    <!-- çµæœ -->
    <div id="result" class="result">
      <div id="rank" class="rank"></div>
      <p id="msg"></p>
      <p class="small">ã‚¹ã‚¿ãƒƒãƒ•ã«ã“ã®ç”»é¢ã‚’ãŠè¦‹ã›ãã ã•ã„</p>
      <p class="small">ç®¡ç†ã‚³ãƒ¼ãƒ‰ï¼š<span id="code" class="code"></span></p>
    </div>

    <p class="small" style="margin-top:14px">
      â€» å½“æ—¥ãŠä¸€äººæ§˜1å›<br>
      â€» æ™¯å“ã¯ã‚¹ã‚¿ãƒƒãƒ•ç¢ºèªå¾Œã«ãŠæ¸¡ã—ã—ã¾ã™
    </p>
  </div>
</div>

<script>
// ===== ç¢ºç‡è¨­å®šï¼ˆå†…éƒ¨ã®ã¿ï¼‰=====
const prizes = [
  {name:"ğŸŠ 1ç­‰ ğŸŠ", rate:2.5, cls:"r1"},
  {name:"âœ¨ 2ç­‰ âœ¨", rate:2.5, cls:"r2"},
  {name:"ğŸ¥‰ 3ç­‰ ğŸ¥‰", rate:95, cls:"r3"}
];

const drawBtn = document.getElementById("drawBtn");
const animation = document.getElementById("animation");
const result = document.getElementById("result");
const rank = document.getElementById("rank");
const msg = document.getElementById("msg");
const codeEl = document.getElementById("code");

function pickPrize(){
  let r = Math.random()*100, acc=0;
  for(const p of prizes){
    acc += p.rate;
    if(r < acc) return p;
  }
  return prizes[2];
}

drawBtn.addEventListener("click", ()=>{
  drawBtn.disabled = true;

  const prize = pickPrize(); // â† è£ã§å…ˆã«æ±ºå®š

  animation.style.display = "block";
  result.style.display = "none";

  setTimeout(()=>{
    animation.style.display = "none";
    result.className = "result " + prize.cls;
    rank.textContent = prize.name;
    msg.textContent = "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼";
    codeEl.textContent =
      new Date().toISOString().slice(0,10).replace(/-/g,"") +
      "-" + Math.floor(Math.random()*900000+100000);
    result.style.display = "block";
  }, 2500); // â˜…ãŠç¥­ã‚Šæ¼”å‡ºæ™‚é–“
});
</script>
</body>
</html>
